!function(){function t(t,n,e,r){if(t.endAngle-t.startAngle==0)return"M 0 0";var a=n*Math.cos(t.startAngle),l=e*Math.sin(t.startAngle),i=n*Math.cos(t.endAngle),c=e*Math.sin(t.endAngle),u=[];return u.push("M",a,l,"A",n,e,"0",t.endAngle-t.startAngle>Math.PI?1:0,"1",i,c,"L",r*i,r*c),u.push("A",r*n,r*e,"0",t.endAngle-t.startAngle>Math.PI?1:0,"0",r*a,r*l,"z"),u.join(" ")}function n(t,n,e,r){var a=t.startAngle>Math.PI?Math.PI:t.startAngle,l=t.endAngle>Math.PI?Math.PI:t.endAngle,i=n*Math.cos(a),c=e*Math.sin(a),u=n*Math.cos(l),s=e*Math.sin(l),o=[];return o.push("M",i,r+c,"A",n,e,"0 0 1",u,r+s,"L",u,s,"A",n,e,"0 0 0",i,c,"z"),o.join(" ")}function e(t,n,e,r,a){var l=t.startAngle<Math.PI?Math.PI:t.startAngle,i=t.endAngle<Math.PI?Math.PI:t.endAngle,c=a*n*Math.cos(l),u=a*e*Math.sin(l),s=a*n*Math.cos(i),o=a*e*Math.sin(i),d=[];return d.push("M",c,u,"A",a*n,a*e,"0 0 1",s,o,"L",s,r+o,"A",a*n,a*e,"0 0 0",c,r+u,"z"),d.join(" ")}function r(t){return t.endAngle-t.startAngle>.2?Math.round(1e3*(t.endAngle-t.startAngle)/(2*Math.PI))/10+"%":""}var a={};a.transition=function(a,l,i,c,u,s){function o(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return e(n(t),i+.5,c+.5,u,s)}}function d(n){var e=d3.interpolate(this._current,n);return this._current=e(0),function(n){return t(e(n),i,c,s)}}function h(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return n(e(t),i-.5,c-.5,u)}}function A(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return.6*i*Math.cos(.5*(n(t).startAngle+n(t).endAngle))}}function f(t){var n=d3.interpolate(this._current,t);return this._current=n(0),function(t){return.6*i*Math.sin(.5*(n(t).startAngle+n(t).endAngle))}}var M=d3.layout.pie().sort(null).value(function(t){return t.value})(l);d3.select("#"+a).selectAll(".innerSlice").data(M).transition().duration(750).attrTween("d",o),d3.select("#"+a).selectAll(".topSlice").data(M).transition().duration(750).attrTween("d",d),d3.select("#"+a).selectAll(".outerSlice").data(M).transition().duration(750).attrTween("d",h),d3.select("#"+a).selectAll(".percent").data(M).transition().duration(750).attrTween("x",A).attrTween("y",f).text(r)},a.draw=function(a,l,i,c,u,s,o,d){var h=d3.layout.pie().sort(null).value(function(t){return t.value})(l),A=d3.select("#"+a).append("g").attr("transform","translate("+i+","+c+")").attr("class","slices");A.selectAll(".innerSlice").data(h).enter().append("path").attr("class","innerSlice").style("fill",function(t){return d3.hsl(t.data.color).darker(.7)}).attr("d",function(t){return e(t,u+.5,s+.5,o,d)}).each(function(t){this._current=t}),A.selectAll(".topSlice").data(h).enter().append("path").attr("class","topSlice").style("fill",function(t){return t.data.color}).style("stroke",function(t){return t.data.color}).attr("d",function(n){return t(n,u,s,d)}).each(function(t){this._current=t}),A.selectAll(".outerSlice").data(h).enter().append("path").attr("class","outerSlice").style("fill",function(t){return d3.hsl(t.data.color).darker(.7)}).attr("d",function(t){return n(t,u-.5,s-.5,o)}).each(function(t){this._current=t}),A.selectAll(".percent").data(h).enter().append("text").attr("class","percent").attr("x",function(t){return.6*u*Math.cos(.5*(t.startAngle+t.endAngle))}).attr("y",function(t){return.6*s*Math.sin(.5*(t.startAngle+t.endAngle))}).text(r).each(function(t){this._current=t})},this.Donut3D=a}();